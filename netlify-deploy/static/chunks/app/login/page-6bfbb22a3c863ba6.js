(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{3993:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(5155),s=r(2115),u=r(5695);function n(e){let{botUsername:t="your_bot_username",onAuth:r}=e,n=(0,s.useRef)(null),o=(0,u.useRouter)();return(0,s.useEffect)(()=>{window.onTelegramAuth=async e=>{try{let t=await fetch("/api/auth/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(r&&r(e),o.push("/feed")):console.error("Authentication failed:",a.error)}catch(e){console.error("Authentication error:",e)}};let e=document.createElement("script");return e.src="https://telegram.org/js/telegram-widget.js?22",e.setAttribute("data-telegram-login",t),e.setAttribute("data-size","large"),e.setAttribute("data-radius","8"),e.setAttribute("data-onauth","onTelegramAuth(user)"),e.setAttribute("data-request-access","write"),e.async=!0,n.current&&n.current.appendChild(e),()=>{n.current&&e.parentNode&&e.parentNode.removeChild(e)}},[t,r,o]),(0,a.jsx)("div",{ref:n})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},7118:(e,t,r)=>{Promise.resolve().then(r.bind(r,3993))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(7118)),_N_E=e.O()}]);